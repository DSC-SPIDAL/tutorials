
<!DOCTYPE html>
<html lang="en-us">
<head>

  
  <meta charset="UTF-8">
  <title>
    Installing Prerequisites | SPIDAL Tutorials
  </title>


  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">

  
  <link rel="canonical" href="https://dsc-spidal.github.io/tutorials/post/install_ompi.md/"/>

  
  <link rel="stylesheet" href="https://dsc-spidal.github.io/tutorials//css/sanitize.css">
  <link rel="stylesheet" href="https://dsc-spidal.github.io/tutorials//css/responsive.css">
  <link rel="stylesheet" href="https://dsc-spidal.github.io/tutorials//css/theme.css">
  <link rel="stylesheet" href="https://dsc-spidal.github.io/tutorials//css/custom.css">
  
  
  <link href="https://dsc-spidal.github.io/tutorials/index.xml" rel="alternate" type="application/rss+xml" title="SPIDAL Tutorials" />
  <link href="https://dsc-spidal.github.io/tutorials/index.xml" rel="feed" type="application/rss+xml" title="SPIDAL Tutorials" />

  
  

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/agate.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</head>



<body>
<div class="container">

  
  <header role="banner">
    <div class="row gutters">
      <div id="site-title" class="col span_6">
        <h1><a href="https://dsc-spidal.github.io/tutorials/">SPIDAL Tutorials</a></h1>
        
      </div>
      <div id="social" class="col span_6">
        <ul>
          
          
          
          
        </ul>
      </div>
    </div>
  </header>


  
  <main id="single" role="main">
    <div class="article-header">
      <h1>Installing Prerequisites</h1>
      <div class="meta">
        Feb 11, 2017 &nbsp;
        
      </div>
    </div>
    <article>
      

<h1 id="prerequisites:529b66b2fe7b69acab780432cc5eade5">Prerequisites</h1>

<ol>
<li><p>Operating System</p>

<ul>
<li>SPDIAL is extensively tested and known to work on,</li>
<li>Red Hat Enterprise Linux Server release 6.7 (Santiago)</li>
<li>Red Hat Enterprise Linux Server release 5.10 (Tikanga)</li>
<li>Ubuntu 14.04 LTS</li>
<li>This may work in Windows systems depending on the ability to setup OpenMPI properly, however, this has not been tested and we recommend choosing a Linux based operating system instead.</li>
</ul></li>

<li><p>Java</p>

<ul>
<li>Download Oracle JDK 8 from <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></li>
<li>Extract the archive to a folder named jdk1.8.0</li>
<li>Set the following environment variables.
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>    <span style="color: #f8f8f2">JAVA_HOME</span><span style="color: #f92672">=&lt;</span><span style="color: #f8f8f2">path</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">to</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">jdk1</span><span style="color: #ae81ff">.8.0</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">directory</span><span style="color: #f92672">&gt;</span>
    <span style="color: #f8f8f2">PATH</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">$JAVA_HOME</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">bin</span><span style="color: #f92672">:</span><span style="color: #f8f8f2">$PATH</span>
    <span style="color: #f8f8f2">export</span> <span style="color: #f8f8f2">JAVA_HOME</span> <span style="color: #f8f8f2">PATH</span>
</pre></div>
</li>
</ul></li>

<li><p>Apache Maven</p>

<ul>
<li>Download latest Maven release from <a href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a></li>
<li>Extract it to some folder and set the following environment variables.
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>    <span style="color: #f8f8f2">MVN_HOME</span><span style="color: #f92672">=&lt;</span><span style="color: #f8f8f2">path</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">to</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">Maven</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">folder</span><span style="color: #f92672">&gt;</span>
    <span style="color: #f8f8f2">$PATH</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">$MVN_HOME</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">bin</span><span style="color: #f92672">:</span><span style="color: #f8f8f2">$PATH</span>
    <span style="color: #f8f8f2">export</span> <span style="color: #f8f8f2">MVN_HOME</span> <span style="color: #f8f8f2">PATH</span>
</pre></div>
</li>
</ul></li>

<li><p>OpenMPI</p>

<ul>
<li>We recommend using <code>OpenMPI 1.10.1</code> although it work with the previous 1.8 versions. Note, if using a version other than 1.10.1 please remember to set Maven dependency appropriately in the <code>pom.xml</code>.</li>
<li>Download OpenMPI 1.10.1 from <a href="http://www.open-mpi.org/software/ompi/v1.10/downloads/openmpi-1.10.1.tar.gz">http://www.open-mpi.org/software/ompi/v1.10/downloads/openmpi-1.10.1.tar.gz</a></li>
<li>Extract the archive to a folder named <code>openmpi-1.10.1</code></li>
<li>Also create a directory named <code>build</code> in some location. We will use this to install OpenMPI
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>   <span style="color: #f8f8f2">wget</span> <span style="color: #f92672">--</span><span style="color: #f8f8f2">no</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">check</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">certificate</span> <span style="color: #f8f8f2">http</span><span style="color: #f92672">:</span><span style="color: #75715e">//www.open-mpi.org/software/ompi/v1.10/downloads/openmpi-1.10.1.tar.gz</span>
   <span style="color: #f8f8f2">tar</span> <span style="color: #f92672">-</span><span style="color: #f8f8f2">xvf</span> <span style="color: #f8f8f2">openmpi</span><span style="color: #f92672">-</span><span style="color: #ae81ff">1.10.1</span><span style="color: #f92672">.</span><span style="color: #a6e22e">tar</span><span style="color: #f92672">.</span><span style="color: #a6e22e">gz</span>
   <span style="color: #f8f8f2">mkdir</span> <span style="color: #f8f8f2">build</span>
</pre></div>
<br /></li>
<li>Set the following environment variables
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>    <span style="color: #f8f8f2">BUILD</span><span style="color: #f92672">=&lt;</span><span style="color: #f8f8f2">path</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">to</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">build</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">directory</span><span style="color: #f92672">&gt;</span>
    <span style="color: #f8f8f2">OMPI_1101</span><span style="color: #f92672">=&lt;</span><span style="color: #f8f8f2">path</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">to</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">openmpi</span><span style="color: #f92672">-</span><span style="color: #ae81ff">1.10.1</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">directory</span><span style="color: #f92672">&gt;</span>
    <span style="color: #f8f8f2">PATH</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">$BUILD</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">bin</span><span style="color: #f92672">:</span><span style="color: #f8f8f2">$PATH</span>
    <span style="color: #f8f8f2">LD_LIBRARY_PATH</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">$BUILD</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">lib</span><span style="color: #f92672">:</span><span style="color: #f8f8f2">$LD_LIBRARY_PATH</span>
    <span style="color: #f8f8f2">export</span> <span style="color: #f8f8f2">BUILD</span> <span style="color: #f8f8f2">OMPI_1101</span> <span style="color: #f8f8f2">PATH</span> <span style="color: #f8f8f2">LD_LIBRARY_PATH</span>
</pre></div>
</li>
<li>The instructions to build OpenMPI depend on the platform. Therefore, we highly recommend looking into the <code>$OMPI_1101/INSTALL</code> file. Platform specific build files are available in <code>$OMPI_1101/contrib/platform</code> directory.</li>
<li>In general, please specify <code>--prefix=$BUILD</code> and <code>--enable-mpi-java</code> as arguments to <code>configure</code> script. If Infiniband is available (highly recommended) specify <code>--with-verbs=&lt;path-to-verbs-installation&gt;</code>. Usually, the path to verbs installation is <code>/usr</code>. In summary, the following commands will build OpenMPI for a Linux system. Also if you have a multicore machine using <code>make -j 8</code> will use 8 cores to build in parallel.
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>    <span style="color: #f8f8f2">cd</span> <span style="color: #f8f8f2">$OMPI_1101</span>
    <span style="color: #f92672">./</span><span style="color: #f8f8f2">configure</span> <span style="color: #f92672">--</span><span style="color: #f8f8f2">prefix</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">$BUILD</span> <span style="color: #f92672">--</span><span style="color: #f8f8f2">enable</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">mpi</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">java</span>
    <span style="color: #f8f8f2">make</span> <span style="color: #f92672">-</span><span style="color: #f8f8f2">j</span> <span style="color: #ae81ff">24</span><span style="color: #f92672">;</span><span style="color: #f8f8f2">make</span> <span style="color: #f8f8f2">install</span>
</pre></div>
</li>
<li>If everything goes well <code>mpirun --version</code> will show <code>mpirun (Open MPI) 1.10.1</code>. Execute the following command to instal <code>$OMPI_1101/ompi/mpi/java/java/mpi.jar</code> as a Maven artifact.
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>    <span style="color: #f8f8f2">mvn</span> <span style="color: #f8f8f2">install</span><span style="color: #f92672">:</span><span style="color: #f8f8f2">install</span><span style="color: #f92672">-</span><span style="color: #f8f8f2">file</span> <span style="color: #f92672">-</span><span style="color: #f8f8f2">DcreateChecksum</span><span style="color: #f92672">=</span><span style="color: #66d9ef">true</span> <span style="color: #f92672">-</span><span style="color: #f8f8f2">Dpackaging</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">jar</span> <span style="color: #f92672">-</span><span style="color: #f8f8f2">Dfile</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">$OMPI_1101</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">ompi</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">mpi</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">java</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">java</span><span style="color: #f92672">/</span><span style="color: #f8f8f2">mpi</span><span style="color: #f92672">.</span><span style="color: #a6e22e">jar</span> <span style="color: #f92672">-</span><span style="color: #f8f8f2">DgroupId</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">ompi</span> <span style="color: #f92672">-</span><span style="color: #f8f8f2">DartifactId</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">ompijavabinding</span> <span style="color: #f92672">-</span><span style="color: #f8f8f2">Dversion</span><span style="color: #f92672">=</span><span style="color: #ae81ff">1.10.1</span>
</pre></div>
</li>
<li>Few examples are available in <code>$OMPI_1101/examples</code>. Please use <code>mpijavac</code> with other parameters similar to <code>javac</code> command to compile OpenMPI Java programs. Once compiled <code>mpirun [options] java -cp &lt;classpath&gt; class-name arguments</code> command with proper values set as arguments will run the MPI Java program.</li>
</ul></li>
</ol>

      
      
      
    </article>
    


  </main>
  
  <nav class="pagination-single">
    
      <span class="previous">&larr; <a href="https://dsc-spidal.github.io/tutorials/post/install_spidal/" rel="prev">Installing SPIDAL Software</a></span>
    
    
  </nav>


  
  <footer role="contentinfo">
    <div style="text-align:center;">
      
      
    </div>
  </footer>


</div>




</body>
</html>

